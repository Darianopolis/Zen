# Quartz TODO list

### Core

- ✅ Update build
   - ✅ Add wayland protocol generation python script
   - ✅ Move to CMake project
   - ✅ Build wlroots separately / use system package
   - ✅ Convert to C++
- ✅ Avoid direct XWayland integration for now
   - ✅ Remove/disable broken XWayland code
   - ✅ Set environment variables (only for some applications)
      - ✅ ELECTRON_OZONE_PLATFORM_HINT="auto"
      - ✅ SDL_VIDEO_DRIVER="wayland"
- ✅ Basic shortcuts
   - ✅ Add "spawn" helper
   - ✅ Switch MOD between Super/Alt if running standalone/nested
   - ✅ MOD + T = Launching konsole
   - ✅ MOD + D = Launching fuzzel/wofi
   - ✅ MOD + Q = Closing focused window
- ✅ Compositor authority for move/size
   - ✅ MOD + LeftClick  - Move
   - ✅ MOD + RightClick - Size
   - ✅ Remove client requested move/size operations
- ✅ Enable viewporter protocol
- ✅ Ensure that xwayland-satellite is sufficient for running Steam
- Add drag support
   - ✅ Add drag icon/source support
   - Continue mouse drag operations outside of window
- ✅ Fullscreen support
- Minimal multi display configuration
   - Add wayland output spawning for multi-window testing
- Add pointer constraint protocol
- ️✅ Basic window zone snapping logic
- Add layer shell protocol
- Client decorations
   - Add decoration manager to tell clients to prefer server side decorations
   - Add thin border around windows

### Bugs

- Minecraft, GIMP
   - [wayland] Data too big for buffer (X + Y > 4096)<br>
     [wayland] error in client communication (pid Z)
- Minecraft, SDL3+Vulkan
   - Extremely laggy resizing

### Additional

- Consolidate interaction logic
   - Rename `quartz_input.cpp` -> `quartz_seat.cpp`
   - Move input binding logic to `quartz_interaction.cpp`
   - Replace `qz_cursor_mode` with `qz_interaction_state`
   - Separate zoning logic from zone interaction binds
- Improved zone logic
   - Have toplevels remember what zones edges they are constrained to
   - Readjust all toplevel zone constraint on workspace/output configuration change
- Shortcut to grab all input back from any clients and ignore any constraints
- Media control keybinds
- Numlock default state
- Improved window list/search/cycling
   - MOD + MouseScroll - Cycle through toplevels under mouse cursor
- Output management
   - Dynamic output removal/creation/configuration
   - Output scaling
   - wlr_output_configuration_v1 protocol?

### Portals

- File chooser
- Screencast portal
- Screenshotting
- Application theming

### Code cleanup

- ✅ Use new/delete instead of calloc/free
- ✅ Use dynamic wl_listener warpper
- ✅ Rename structures and drop `struct` prefix?
- ✅ Replace wl_list/wl_array with standard containers
- Unified C++ format based logging
