### Completed

- ✅ Update build
   - ✅ Add wayland protocol generation python script
   - ✅ Move to CMake project
   - ✅ Build wlroots separately / use system package
   - ✅ Convert to C++
- ✅ Basic shortcuts
   - ✅ Add "spawn" helper
   - ✅ Switch MOD between Super/Alt if running standalone/nested
   - ✅ MOD + T = Launching konsole
   - ✅ MOD + D = Launching fuzzel/wofi
   - ✅ MOD + Q = Closing focused window
- ✅ Compositor authority for move/size
   - ✅ MOD + LeftClick  - Move
   - ✅ MOD + RightClick - Size
   - ✅ Remove client requested move/size operations
- ✅ Enable viewporter protocol
- ✅ Ensure that xwayland-satellite is sufficient for running Steam
- ✅ Add drag support
   - ✅ Add drag icon/source support
   - ✅ Send mouse events to last clicked window when pressed
- ✅ Fullscreen support
- ️✅ Basic window zone snapping logic
- ✅ Server decorations
   - ✅ Add decoration manager to tell clients to prefer server side decorations
   - ✅ Add thin border around windows
- ✅ Minimal multi display configuration
- ✅ Improved pointer handling
   - ✅ Add pointer constraint protocol
   - ✅ Relative cursor motion protocol
   - ✅ Cursor hiding
- ✅ Add XWayland integration
   - ✅ Cursor size difference over X11 windows
- ✅ Shell layers
   - ✅ Add multiple strata levels
   - ✅ Add layer shell protocol
   - ✅ Ensure layer surface popups open on top/overlay surface
- ✅ Tidy up border handling
   - ✅ Pixel-perfect position/size calculations for zones (would be able to use `wlr_box` for zone calculations and drop custom `Box` type)
- ✅ Track mouse button press state individually instead of using single global counter (which will become desynced on skipped input events)
- ✅ Prevent clients from hiding the cursor unless they have keyboard focus
- ✅ xdg-activation
- ✅ Spawn child clients in center of parent
- ✅ Compositor initiated fullscreen toggle
- ✅ Throttle resize requests
- ✅ Shortcut to grab all input back from any clients and ignore any constraints
- ✅ Media control keybinds
- ✅ Improved window list/search/cycling
   - ✅ MOD + MouseScroll - Cycle through toplevels under mouse cursor
- ✅ Screen casting
- ✅ Bottom layer shell elements should be behind fullscreen applications when fullscreen app is on top and focused, but above otherwise

### Bugs

- Minecraft, GIMP
   - The following error occasionally occurs if the window is moved during startup
      - (possibly because it's not properly responding to wayland events in that time?)
   - [wayland] Data too big for buffer (X + Y > 4096)<br>
     [wayland] error in client communication (pid Z)
- SDL3/GLFW + Vulkan (AMD) + syncobj
   - Occasional OUT-OF-DATE when resizing at extremely high frame rate (14k+fps). Appears to be a Vulkan WSI bug
      - Currently tested only with separate render thread. Need to test with syncronous rendering and other drivers
- BeamNG + VSync-disabled + wlroots DRM Backend + AMD RADV (testing on 9070 XT)
   - Stuttery presentation but high framerate
   - Stutters go away if
      - Ran in nested compositor (TESTED: nested xwayland-satellite AND gamescope)
      - Ran in standalone Niri with same xwayland-satellite binary (using Smithay isntead of wlroots)
      - Ran with VSync enabled
      - Ran with NVidia GPU (VSync enabled or disabled)
   - Stutters also present in
      - Native Vulkan binary, Proton Vulkan mode, Proton DirectX11 mode
      - DWL with direct XWayland integration
- Steam + wofi drun mode
   - When opened via `wofi --show drun`, Steam window shows, then is shortly closed, then repeats
      - NOTE: If `wofi` is launched without `WAYLAND_SERVER` set (E.g. `env -u WAYLAND_SERVER=0 wofi --show drun`), it searches for a display server manually and opens in the parent compositor (which has a lower socket name)
   - Does not occur when launching via `env -u WAYLAND_SERVER rofi -show drun` (can't test without wayland server masked until layer shell protocol is implemented)
- Steam client gamma problem
   - Sometimes, after closing a steam game, the steam client's gamma is messed up.
   - Closing and reopening the Steam window does not fix it, the entire processh as to be completely restarted
- Steam client popups appearing in other XWayland windows
   - When steam and xeyes are open, can observe Steam top menu popups showing in xeyes (even when xeyes is in a completely different part of the screen)
- First key input after `kalk` is opened is ignored
- Occasionally a unexpected scene_tree_node with data pointing back to an existing Toplevel is created
- Blender window size oscillates on resize
   - Don't resend new resize request at end, simply override rendering behaviour to match surface geometry
   - This would also allow us to use the physical surface size for misbehaving SDL applications without running into a similar oscillation issue

### Additional

- Support key repeat for bindings (e.g. volume up/down)
- Smoother resize behaviour
   - Opposite corner/edge to resizing should remain pinned in place (E.g. currently if you resize from top-left, the bottom-right wobbles around)
- Focus follows mouse?
   - Perhaps a mode that defers to key presses, E.g. focus only follows mouse when no keys are pressed
- Pseudo-fullscreen mode
   - Per-window mode to spoof permenant fullscreen state/size
      - Particularly useful for games that misbehave when resized
- Improved input and modfifier handling
   - Set default numlock state
   - Mask main modifier(s) from clients?
   - Mask all key/button inputs from clients when main modifier is down?
   - Support non-modifier keys as modifiers (E.g. mouse side buttons)
   - Custom mouse acceleration curves
   - Additional capabilities
      - Key/button remapping?
      - Joystick remapping?
- Improve logging
   - Manage spawned process standard output
      - Spawn option to either ignore, log, or pipe to separate file
   - Track log message origins
   - Use standard logging format with available log view/analysis tooling?
- Support wlr-foreign-toplevel-management for rofi window mode
- Surface positions should remain fixed relative to output position when resizing other outputs
- Compositor interaction state management
   - Newly spawned windows should not take focus when in the middle of an interaction (e.g. zone/move/size)
   - Unify input processing into single callback + state machine?
   - Interlocks to prevent invalid interaction interactions
      - While cursor is hidden, should be considered to not exist - add centralised way of querying cursor position/state
- Support xdg-positioner requests to position child windows
- Use updated protocol version
   - xdg_shell -> version 7
   - tell clients that all edges are constrained
- Debug options
   - WLR_SCENE_DEBUG_DAMAGE_HIGHLIGHT
- Add IPC with messaging client
   - Spawn message
- xdg_foreign support
- Idle protocol
- Consolidate interaction logic
   - Move input binding logic to `interaction.cpp`
   - Separate zoning logic from zone interaction binds
- Improved zone logic
   - Have toplevels remember what zones edges they are constrained to
   - Readjust all toplevel zone constraint on workspace/output configuration change
- Numlock default state
- Output management
   - Dynamic output removal/creation/configuration
   - Output scaling
   - wlr_output_configuration_v1 protocol?

### Portals

- ✅ File chooser
- ✅ Screencast portal
- ✅ Screenshotting
- Application Theming
